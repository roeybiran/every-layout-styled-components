{"version":3,"file":"Reel.js","sources":["../src/Reel.tsx"],"sourcesContent":["import React, { useEffect, useRef } from \"react\";\nimport styled from \"styled-components\";\n\ntype StyledReelProps = {\n  height?: string;\n  itemWidth?: string;\n  space?: string;\n  noBar?: boolean;\n};\n\nconst StyledReel = styled.div<StyledReelProps>`\n  display: flex;\n  overflow-x: auto;\n  overflow-y: hidden;\n\n  height: ${({ height }) => height};\n\n  > * {\n    flex: 0 0 ${({ itemWidth }) => itemWidth};\n  }\n\n  > figure > img,\n  > img {\n    height: 100%;\n    flex-basis: auto;\n    width: auto;\n  }\n\n  > * + * {\n    margin-inline-start: ${({ space }) => space};\n  }\n\n  ${({ noBar, space }) =>\n    noBar\n      ? \"\"\n      : `\n  &.overflowing {\n    padding-bottom: ${space}\n  }\n`}\n\n  ${({ noBar }) =>\n    noBar\n      ? `\n    scrollbar-width: none;\n\n    ::-webkit-scrollbar {\n      display: none;\n    }\n    `\n      : \"\"}\n`;\n\nexport type Props = Omit<\n  React.DetailedHTMLProps<React.HTMLAttributes<HTMLDivElement>, HTMLDivElement>,\n  \"ref\" | \"height\"\n> &\n  StyledReelProps & {\n    as?: keyof JSX.IntrinsicElements;\n  };\n\nexport default function Reel(props: Props) {\n  const reelRef = useRef<HTMLDivElement>(null);\n\n  const handleObserverCallback = () => {\n    if (!reelRef.current) return;\n    reelRef.current.classList.toggle(\n      \"overflowing\",\n      reelRef.current.scrollWidth > reelRef.current.clientWidth\n    );\n  };\n\n  useEffect(() => {\n    if (!reelRef.current) return;\n    let resizeObserver: ResizeObserver;\n    let mutationObserver: MutationObserver;\n    if (\"ResizeObserver\" in window) {\n      resizeObserver = new ResizeObserver(() => {\n        handleObserverCallback();\n      });\n      resizeObserver.observe(reelRef.current);\n    }\n    if (\"MutationObserver\" in window) {\n      mutationObserver = new MutationObserver(() => {\n        handleObserverCallback();\n      });\n      mutationObserver.observe(reelRef.current, { childList: true });\n    }\n    return function cleanup() {\n      resizeObserver?.disconnect();\n      mutationObserver?.disconnect();\n    };\n  }, []);\n\n  return (\n    <StyledReel\n      className=\"reel\"\n      itemWidth={props.itemWidth ?? \"auto\"}\n      space={props.space ?? \"1rem\"}\n      height={props.height ?? \"auto\"}\n      noBar={props.noBar ?? false}\n      //\n      as={props.as ?? \"div\"}\n      ref={reelRef}\n      {...props}\n    />\n  );\n}\n"],"names":["StyledReel","styled","div","height","itemWidth","space","noBar","Reel","props","reelRef","useRef","handleObserverCallback","current","classList","toggle","scrollWidth","clientWidth","useEffect","resizeObserver","mutationObserver","window","ResizeObserver","observe","MutationObserver","childList","cleanup","disconnect","as"],"mappings":";;;;AAUA,IAAMA,UAAU,GAAGC,MAAM,CAACC,GAAV;AAAA;AAAA;AAAA,+LAKJ;AAAA,MAAGC,MAAH,QAAGA,MAAH;AAAA,SAAgBA,MAAhB;AAAA,CALI,EAQA;AAAA,MAAGC,SAAH,SAAGA,SAAH;AAAA,SAAmBA,SAAnB;AAAA,CARA,EAmBW;AAAA,MAAGC,KAAH,SAAGA,KAAH;AAAA,SAAeA,KAAf;AAAA,CAnBX,EAsBZ;AAAA,MAAGC,KAAH,SAAGA,KAAH;AAAA,MAAUD,KAAV,SAAUA,KAAV;AAAA,SACAC,KAAK,GACD,EADC,sDAIaD,KAJb,YADL;AAAA,CAtBY,EA+BZ;AAAA,MAAGC,KAAH,SAAGA,KAAH;AAAA,SACAA,KAAK,oGAQD,EATJ;AAAA,CA/BY,CAAhB;AAmDe,SAASC,IAAT,CAAcC,KAAd,EAA4B;AAAA;;AACzC,MAAMC,OAAO,GAAGC,MAAM,CAAiB,IAAjB,CAAtB;;AAEA,MAAMC,sBAAsB,GAAG,SAAzBA,sBAAyB,GAAM;AACnC,QAAI,CAACF,OAAO,CAACG,OAAb,EAAsB;AACtBH,IAAAA,OAAO,CAACG,OAAR,CAAgBC,SAAhB,CAA0BC,MAA1B,CACE,aADF,EAEEL,OAAO,CAACG,OAAR,CAAgBG,WAAhB,GAA8BN,OAAO,CAACG,OAAR,CAAgBI,WAFhD;AAID,GAND;;AAQAC,EAAAA,SAAS,CAAC,YAAM;AACd,QAAI,CAACR,OAAO,CAACG,OAAb,EAAsB;AACtB,QAAIM,cAAJ;AACA,QAAIC,gBAAJ;;AACA,QAAI,oBAAoBC,MAAxB,EAAgC;AAC9BF,MAAAA,cAAc,GAAG,IAAIG,cAAJ,CAAmB,YAAM;AACxCV,QAAAA,sBAAsB;AACvB,OAFgB,CAAjB;AAGAO,MAAAA,cAAc,CAACI,OAAf,CAAuBb,OAAO,CAACG,OAA/B;AACD;;AACD,QAAI,sBAAsBQ,MAA1B,EAAkC;AAChCD,MAAAA,gBAAgB,GAAG,IAAII,gBAAJ,CAAqB,YAAM;AAC5CZ,QAAAA,sBAAsB;AACvB,OAFkB,CAAnB;AAGAQ,MAAAA,gBAAgB,CAACG,OAAjB,CAAyBb,OAAO,CAACG,OAAjC,EAA0C;AAAEY,QAAAA,SAAS,EAAE;AAAb,OAA1C;AACD;;AACD,WAAO,SAASC,OAAT,GAAmB;AAAA;;AACxB,yBAAAP,cAAc,UAAd,0DAAgBQ,UAAhB;AACA,2BAAAP,gBAAgB,UAAhB,8DAAkBO,UAAlB;AACD,KAHD;AAID,GApBQ,EAoBN,EApBM,CAAT;AAsBA,sBACE,oBAAC,UAAD;AACE,IAAA,SAAS,EAAC,MADZ;AAEE,IAAA,SAAS,sBAAElB,KAAK,CAACJ,SAAR,+DAAqB,MAFhC;AAGE,IAAA,KAAK,kBAAEI,KAAK,CAACH,KAAR,uDAAiB,MAHxB;AAIE,IAAA,MAAM,mBAAEG,KAAK,CAACL,MAAR,yDAAkB,MAJ1B;AAKE,IAAA,KAAK,kBAAEK,KAAK,CAACF,KAAR,uDAAiB,KALxB;AAAA;AAOE,IAAA,EAAE,eAAEE,KAAK,CAACmB,EAAR,iDAAc,KAPlB;AAQE,IAAA,GAAG,EAAElB;AARP,KASMD,KATN,EADF;AAaD;;;;"}